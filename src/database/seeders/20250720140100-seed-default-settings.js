'use strict';

module.exports = {
  async up(queryInterface, Sequelize) {
    const now = new Date();
    
    // Default pricing settings
    await queryInterface.bulkInsert('business_settings', [
      // Lease pricing
      {
        category_id: 2,
        setting_key: 'lease.base_price',
        setting_value: JSON.stringify(50.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'LEASE',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1, // Assuming admin user ID is 1
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 2,
        setting_key: 'lease.daily_rate',
        setting_value: JSON.stringify(2.50),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'LEASE',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 7,
        setting_key: 'lease.deposit',
        setting_value: JSON.stringify(100.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'LEASE',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      
      // Refill pricing
      {
        category_id: 3,
        setting_key: 'refill.price_per_kg',
        setting_value: JSON.stringify(15.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'REFILL',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 3,
        setting_key: 'refill.minimum_charge',
        setting_value: JSON.stringify(25.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'REFILL',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      
      // Swap pricing
      {
        category_id: 4,
        setting_key: 'swap.fee',
        setting_value: JSON.stringify(10.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'SWAP',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 4,
        setting_key: 'swap.poor_condition_fee',
        setting_value: JSON.stringify(50.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'SWAP',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 4,
        setting_key: 'swap.damaged_condition_fee',
        setting_value: JSON.stringify(100.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'SWAP',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      
      // Registration pricing
      {
        category_id: 5,
        setting_key: 'registration.fee',
        setting_value: JSON.stringify(20.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'REGISTRATION',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      
      // Penalty settings
      {
        category_id: 6,
        setting_key: 'penalty.rate',
        setting_value: JSON.stringify(5.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'PENALTY',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 6,
        setting_key: 'penalty.late_return_per_day',
        setting_value: JSON.stringify(2.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'PENALTY',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      
      // Deposit amounts
      {
        category_id: 7,
        setting_key: 'deposit.amount',
        setting_value: JSON.stringify(150.00),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: 'DEPOSIT',
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      
      // Business rules
      {
        category_id: 8,
        setting_key: 'business.max_active_leases_per_customer',
        setting_value: JSON.stringify(5),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: null,
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 8,
        setting_key: 'business.inventory_low_threshold',
        setting_value: JSON.stringify(10),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: null,
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      
      // Tax settings
      {
        category_id: 10,
        setting_key: 'tax.rate',
        setting_value: JSON.stringify(8.5),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: null,
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      
      // Customer tier discounts
      {
        category_id: 9,
        setting_key: 'discount.business_tier',
        setting_value: JSON.stringify(10.0),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: 'business',
        operation_type: null,
        effective_date: now,
        expiry_date: null,
        priority: 1,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 9,
        setting_key: 'discount.premium_tier',
        setting_value: JSON.stringify(15.0),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: 'premium',
        operation_type: null,
        effective_date: now,
        expiry_date: null,
        priority: 2,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      
      // Volume discounts
      {
        category_id: 9,
        setting_key: 'discount.volume_10_plus',
        setting_value: JSON.stringify(5.0),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: null,
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 9,
        setting_key: 'discount.volume_20_plus',
        setting_value: JSON.stringify(8.0),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: null,
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
      {
        category_id: 9,
        setting_key: 'discount.volume_50_plus',
        setting_value: JSON.stringify(12.0),
        data_type: 'number',
        outlet_id: null,
        cylinder_type: null,
        customer_tier: null,
        operation_type: null,
        effective_date: now,
        expiry_date: null,
        priority: 0,
        is_active: true,
        created_by: 1,
        updated_by: 1,
        version: 1,
        created_at: now,
        updated_at: now,
      },
    ], {});
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete('business_settings', null, {});
  }
};